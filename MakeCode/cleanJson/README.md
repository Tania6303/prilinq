# Clean JSON v1

## 📋 תפקיד

**כלי עזר** לניקוי JSON מחשבוניות ויצירת סיכום מסודר.

---

## 🎯 מה המודול עושה?

**מטרה:** לנקות JSON מיותר וליצור סיכום קריא

### תהליך:
1. **קבלת JSON** - JSON של חשבונית (גולמי או מעובד)
2. **ניקוי** - הסרת שדות ריקים/מיותרים
3. **סיכום** - יצירת סיכום מסודר
4. **החזרה** - JSON נקי + סיכום

---

## 📥 קלט (Input)

```javascript
{
  // JSON של חשבונית (יכול להיות מורכב)
  PINVOICES: [{
    SUPNAME: "2511",
    BOOKNUM: "...",
    IVDATE: "...",
    DETAILS: "",              // שדה ריק - יוסר
    PIVDOC_SUBFORM: [...],
    UNUSED_FIELD: null        // שדה null - יוסר
  }]
}
```

---

## 📤 פלט (Output)

```javascript
{
  cleaned_json: {
    PINVOICES: [{
      SUPNAME: "2511",
      BOOKNUM: "...",
      IVDATE: "...",
      PIVDOC_SUBFORM: [...]
      // שדות ריקים הוסרו
    }]
  },

  summary: {
    total_invoices: 1,
    fields_removed: 2,
    structure: "PIVDOC_SUBFORM (4 items)"
  }
}
```

---

## ✨ מה נוקה?

### 1. **שדות ריקים**
- `""` (מחרוזת ריקה)
- `null`
- `undefined`
- `[]` (מערך ריק)
- `{}` (אובייקט ריק)

### 2. **שדות מיותרים**
- שדות למידה (`_learningNote`)
- שדות זמניים
- duplicate keys

---

## 🔧 פונקציות עיקריות

### **cleanJSON(json)**
מנקה JSON:
- מסיר שדות ריקים
- מסיר null values
- מסיר שדות זמניים

### **createSummary(json)**
יוצר סיכום:
- כמה חשבוניות
- כמה תעודות/פריטים
- מבנה כללי

---

## 📂 קבצים

```
cleanJson/
└── v1                              ← הקוד (3KB)
```

---

## ✅ דוגמת שימוש

### לפני ניקוי:
```javascript
{
  PINVOICES: [{
    SUPNAME: "2511",
    BOOKNUM: "123",
    DETAILS: "",           // ריק
    TEMP_FIELD: null,      // null
    PIVDOC_SUBFORM: [...]
  }]
}
```

### אחרי ניקוי:
```javascript
{
  PINVOICES: [{
    SUPNAME: "2511",
    BOOKNUM: "123",
    PIVDOC_SUBFORM: [...]
  }]
}
```

---

## 💡 מתי להשתמש?

### **שימושים:**
- ✅ לפני שליחה ל-Priority (להסיר שדות מיותרים)
- ✅ לניפוי JSON לבדיקות
- ✅ ליצירת סיכום קריא

### **לא להשתמש:**
- ❌ במהלך למידה (שדות זמניים חשובים!)
- ❌ אם צריך לשמור שדות ריקים

---

## 🔄 מיקום במערכת

```
┌────────────────────────┐
│ Processing Invoice     │
│ או                     │
│ Production Invoice     │
└───────────┬────────────┘
            ↓ JSON גולמי
┌────────────────────────┐
│ cleanJson              │ ← כלי עזר
└───────────┬────────────┘
            ↓ JSON נקי
┌────────────────────────┐
│ Priority ERP           │
└────────────────────────┘
```

---

## 📝 עדכונים

### **גרסה 1:**
- ניקוי בסיסי של שדות ריקים
- יצירת סיכום פשוט

---

## 🐛 Troubleshooting

**בעיה:** שדות חשובים נמחקים
**פתרון:** בדוק שהשדות לא ריקים באמת

**בעיה:** הסיכום לא מדויק
**פתרון:** וודא שה-JSON תקין

---

**גרסה:** 1
**מחבר:** Claude Code (Anthropic)
